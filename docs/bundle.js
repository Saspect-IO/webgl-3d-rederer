(()=>{"use strict";var t={777:(t,e,r)=>{r.r(e),r.d(e,{default:()=>i});const i=r.p+"assets/resources/formula1_DefaultMaterial_Glossiness/textures/formula1_DefaultMaterial_Glossiness.png"},728:(t,e,r)=>{r.r(e),r.d(e,{default:()=>i});const i=r.p+"assets/resources/formula1_DefaultMaterial_Height/textures/formula1_DefaultMaterial_Height.png"},435:(t,e,r)=>{r.r(e),r.d(e,{default:()=>i});const i=r.p+"assets/resources/formula1_DefaultMaterial_Specular/textures/formula1_DefaultMaterial_Specular.png"},324:(t,e,r)=>{r.r(e),r.d(e,{default:()=>i});const i=r.p+"assets/resources/formula_1/textures/formula_1.png"},128:(t,e,r)=>{r.r(e),r.d(e,{default:()=>i});const i=r.p+"assets/resources/formula_1/source/formula_1.obj"},259:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(182));e.default=class{constructor(){new n.default}}},486:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0});class r extends HTMLElement{constructor(){super();const t=this.attachShadow({mode:"open"});t.innerHTML='\n          <style>\n              :host-context(.fade-app-loader) {\n                visibility: hidden;\n                opacity: 0;\n                transition: visibility 0.5s, opacity 0.5s linear;\n              }\n              .lds-ellipsis {\n                display: inline-block;\n                position: relative;\n                width: 80px;\n                height: 80px;\n                opacity: 0.5;\n              }\n              .lds-ellipsis div {\n                position: absolute;\n                top: 33px;\n                width: 20px;\n                height: 20px;\n                border-radius: 50%;\n                background: #fff;\n                animation-timing-function: cubic-bezier(0, 1, 1, 0);\n              }\n              .lds-ellipsis div:nth-child(1) {\n                left: 0px;\n                animation: lds-ellipsis1 0.6s infinite;\n              }\n              .lds-ellipsis div:nth-child(2) {\n                left: 5px;\n                animation: lds-ellipsis2 0.6s infinite;\n              }\n              .lds-ellipsis div:nth-child(3) {\n                left: 30px;\n                animation: lds-ellipsis2 0.6s infinite;\n              }\n              .lds-ellipsis div:nth-child(4) {\n                left: 60px;\n                animation: lds-ellipsis3 0.6s infinite;\n              }\n              @keyframes lds-ellipsis1 {\n                0% {\n                  transform: scale(0);\n                }\n                100% {\n                  transform: scale(1);\n                }\n              }\n              @keyframes lds-ellipsis3 {\n                0% {\n                  transform: scale(1);\n                }\n                100% {\n                  transform: scale(0);\n                }\n              }\n              @keyframes lds-ellipsis2 {\n                0% {\n                  transform: translate(0, 0);\n                }\n                100% {\n                  transform: translate(24px, 0);\n                }\n              }\n\n          </style>\n          <div id="app-loader"\n              style="display: flex;\n              opacity: 1;\n              justify-content: center;\n              align-items: center;\n              position: fixed; \n              left: 0; \n              top: 0; right: \n              0; bottom: 0; \n              background: rgb(0, 0, 0, 0.4);">\n              <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>\n          </div>',this.appLoaderElem=t.children[1]}disable(){document.getElementById("app").classList.add("fade-app-loader")}}e.default=r,customElements.define("app-loader",r)},657:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default={MODELS:{FORMULA_1:{TEXTURES:["/webgl-3d-renderer/assets/resources/formula_1/textures/formula_1.png","/webgl-3d-renderer/assets/resources/formula_1/textures/formula1_DefaultMaterial_Specular.png","/webgl-3d-renderer/assets/resources/formula_1/textures/formula1_DefaultMaterial_Glossiness.png","/webgl-3d-renderer/assets/resources/formula_1/textures/formula1_DefaultMaterial_Height.png"],MODEL:"/webgl-3d-renderer/assets/resources/formula_1/source/formula_1.obj"}}}},44:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(324)),o=i(r(435)),a=i(r(777)),s=i(r(728)),l=i(r(128));e.default={MODELS:{FORMULA_1:{TEXTURES:[n.default,o.default,a.default,s.default],MODEL:l.default}}}},198:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.config=void 0;const n=i(r(44)),o=i(r(657)),a=(n.default,o.default);e.config=a},21:function(t,e){var r=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))((function(n,o){function a(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});class i{constructor(t,e){const r=t.createTexture();t.bindTexture(t.TEXTURE_2D,r),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.generateMipmap(t.TEXTURE_2D),this.gl=t,this.texture=r}static loadTexture(t,e){return r(this,void 0,void 0,(function*(){const r=new Image;return r.src=e,yield r.decode(),new i(t,r)}))}setUniform(t,e){return this.gl.uniform1i(t[`sampler${e}Loc`],e),this}activate(t){return this.gl.activeTexture(this.gl[`TEXTURE${t}`]),this.gl.bindTexture(this.gl.TEXTURE_2D,this.texture),this}}e.default=i},193:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.CameraController=e.Camera=void 0;const n=r(383),o=r(594),a=i(r(179));class s{constructor(t,e=n.CameraSettings.FIELD_OF_VIEW,r=n.CameraSettings.NEAR_PLANE,i=n.CameraSettings.FAR_PLANE){this.perspectiveProjection=new Float32Array(16),this.orthoProjection=new Float32Array(16);const l=t.canvas.width/t.canvas.height,c=-t.canvas.width/2,u=t.canvas.width/2,h=t.canvas.height/2,d=-t.canvas.height/2;o.Matrix4.perspective(this.perspectiveProjection,e,l,r,i),o.Matrix4.ortho(this.orthoProjection,c,u,d,h,1,10),this.transform=new a.default,this.viewMatrix=new Float32Array(16),this.mode=s.MODE_ORBIT}panX(t){this.mode!=s.MODE_ORBIT&&(this.updateViewMatrix(),this.transform.position.x+=this.transform.right[0]*t,this.transform.position.y+=this.transform.right[1]*t,this.transform.position.z+=this.transform.right[2]*t)}panY(t){this.updateViewMatrix(),this.transform.position.y+=this.transform.up[1]*t,this.mode!=s.MODE_ORBIT&&(this.transform.position.x+=this.transform.up[0]*t,this.transform.position.z+=this.transform.up[2]*t)}panZ(t){this.updateViewMatrix(),this.mode==s.MODE_ORBIT?this.transform.position.z+=t:(this.transform.position.x+=this.transform.forward[0]*t,this.transform.position.y+=this.transform.forward[1]*t,this.transform.position.z+=this.transform.forward[2]*t)}updateViewMatrix(){return this.mode==s.MODE_FREE?this.transform.modelMatrix.resetMat().vtranslate(this.transform.position).rotateX(n.degToRad(this.transform.rotation.x)).rotateY(n.degToRad(this.transform.rotation.y)):this.transform.modelMatrix.resetMat().rotateX(n.degToRad(this.transform.rotation.x)).rotateY(n.degToRad(this.transform.rotation.y)).vtranslate(this.transform.position),this.transform.updateDirection(),o.Matrix4.invert(this.viewMatrix,this.transform.modelMatrix.matrix),this.viewMatrix}}e.Camera=s,s.MODE_FREE=n.CameraSettings.MODE_FREE,s.MODE_ORBIT=n.CameraSettings.MODE_ORBIT,e.CameraController=class{constructor(t,e){const r=t.canvas.getBoundingClientRect();this.canvas=t.canvas,this.camera=e,this.rotateRate=n.CameraControlsSettings.ROTATION_RATE,this.panRate=n.CameraControlsSettings.PAN_RATE,this.zoomRate=n.CameraControlsSettings.ZOOM_RATE,this.offsetX=r.left,this.offsetY=r.top,this.initX=0,this.initY=0,this.prevX=0,this.prevY=0,this.onUpHandler=t=>this.onMouseUp(),this.onMoveHandler=t=>this.onMouseMove(t),this.onTouchEndHandler=t=>this.onTouchEnd(t),this.onTouchMoveHandler=t=>this.onTouchMove(t),this.canvas.addEventListener(n.CameraControlsSettings.MOUSE_DOWN,(t=>this.onMouseDown(t))),this.canvas.addEventListener(n.CameraControlsSettings.MOUSE_WHEEL,(t=>this.onMouseWheel(t))),this.canvas.addEventListener(n.CameraControlsSettings.TOUCH_START,(t=>this.onTouchStart(t))),this.canvas.addEventListener(n.CameraControlsSettings.TOUCH_MOVE,(t=>this.onTouchMove(t)))}getMouseVec2(t){return{x:t.pageX-this.offsetX,y:t.pageY-this.offsetY}}onMouseDown(t){this.initX=this.prevX=t.pageX-this.offsetX,this.initY=this.prevY=t.pageY-this.offsetY,this.canvas.addEventListener(n.CameraControlsSettings.MOUSE_UP,this.onUpHandler),this.canvas.addEventListener(n.CameraControlsSettings.MOUSE_MOVE,this.onMoveHandler)}onTouchStart(t){this.initX=this.prevX=t.touches[0].clientX-this.offsetX,this.initY=this.prevY=t.touches[0].clientY-this.offsetY,this.canvas.addEventListener(n.CameraControlsSettings.TOUCH_END,this.onTouchEndHandler),this.canvas.addEventListener(n.CameraControlsSettings.TOUCH_MOVE,this.onTouchMoveHandler)}onMouseUp(){this.canvas.removeEventListener(n.CameraControlsSettings.MOUSE_UP,this.onUpHandler),this.canvas.removeEventListener(n.CameraControlsSettings.MOUSE_MOVE,this.onMoveHandler)}onTouchEnd(t){this.canvas.removeEventListener(n.CameraControlsSettings.TOUCH_END,this.onTouchEndHandler),this.canvas.removeEventListener(n.CameraControlsSettings.TOUCH_MOVE,this.onTouchMoveHandler)}onMouseWheel(t){let e=Math.max(-1,Math.min(1,t.wheelDelta||-t.detail));this.camera.panZ(-e*(this.zoomRate/this.canvas.height))}onMouseMove(t){let e=t.pageX-this.offsetX,r=t.pageY-this.offsetY,i=e-this.prevX,n=r-this.prevY;t.shiftKey?(this.camera.panX(-i*(this.panRate/this.canvas.width)),this.camera.panY(n*(this.panRate/this.canvas.height))):(this.camera.transform.rotation.y+=i*(this.rotateRate/this.canvas.width),this.camera.transform.rotation.x+=n*(this.rotateRate/this.canvas.height)),this.prevX=e,this.prevY=r}onTouchMove(t){let e=t.touches[0].clientX-this.offsetX,r=t.touches[0].clientY-this.offsetY,i=e-this.prevX,n=r-this.prevY;t.shiftKey?(this.camera.panX(-i*(this.panRate/this.canvas.width)),this.camera.panY(n*(this.panRate/this.canvas.height))):(this.camera.transform.rotation.y+=i*(this.rotateRate/this.canvas.width),this.camera.transform.rotation.x+=n*(this.rotateRate/this.canvas.height)),this.prevX=e,this.prevY=r}}},291:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const n=i(r(179));e.default=class{constructor(t){this.mesh=t,this.transform=new n.default}setScale(t,e,r){return this.transform.scale.set(t,e,r),this}setPosition(t,e,r){return this.transform.position.set(t,e,r),this}setRotation(t,e,r){return this.transform.rotation.set(t,e,r),this}addScale(t,e,r){return this.transform.scale.x+=t,this.transform.scale.y+=e,this.transform.scale.y+=e,this}addPosition(t,e,r){return this.transform.position.x+=t,this.transform.position.y+=e,this.transform.position.z+=r,this}addRotation(t,e,r){return this.transform.rotation.x+=t,this.transform.rotation.y+=e,this.transform.rotation.z+=r,this}preRender(){return this.transform.updateMatrix(),this}}},705:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=r(383);e.default=class{constructor(t){var e,r,n,o,a,s,l;this.gl=null,this.rgb_32_bit=255,this.alpha=1;const c=document.getElementById(t);this.gl=c.getContext(i.ProgramEntrySettings.WEBGL_CONTEXT),null!==(e=this.gl)&&void 0!==e||alert(i.ProgramEntrySettings.WEBGL_CONTEXT_ERROR_MESSAGE),null===(r=this.gl)||void 0===r||r.cullFace(this.gl.BACK),null===(n=this.gl)||void 0===n||n.frontFace(this.gl.CCW),null===(o=this.gl)||void 0===o||o.enable(this.gl.DEPTH_TEST),null===(a=this.gl)||void 0===a||a.enable(this.gl.CULL_FACE),null===(s=this.gl)||void 0===s||s.depthFunc(this.gl.LEQUAL),null===(l=this.gl)||void 0===l||l.blendFunc(this.gl.SRC_ALPHA,this.gl.ONE_MINUS_SRC_ALPHA),this.canvas=c}setSize(t,e){var r;return this.canvas.style.width=t+"px",this.canvas.style.height=e+"px",this.canvas.width=t,this.canvas.height=e,null===(r=this.gl)||void 0===r||r.viewport(0,0,t,e),this}depthRender(t){var e,r,i,n,o,a;return null===(e=this.gl)||void 0===e||e.bindFramebuffer(null===(r=this.gl)||void 0===r?void 0:r.FRAMEBUFFER,t.depthFramebuffer),null===(i=this.gl)||void 0===i||i.viewport(0,0,t.depthTextureSize,t.depthTextureSize),null===(n=this.gl)||void 0===n||n.clear((null===(o=this.gl)||void 0===o?void 0:o.COLOR_BUFFER_BIT)|(null===(a=this.gl)||void 0===a?void 0:a.DEPTH_BUFFER_BIT)),this}fitScreen(t,e){return this.setSize(window.innerWidth*(t||1),window.innerHeight*(e||1))}setClearColor(t,e,r,i=1){var n;return null===(n=this.gl)||void 0===n||n.clearColor(t/this.rgb_32_bit,e/this.rgb_32_bit,r/this.rgb_32_bit,i),this}clearFramebuffer(){var t,e;return null===(t=this.gl)||void 0===t||t.bindFramebuffer(null===(e=this.gl)||void 0===e?void 0:e.FRAMEBUFFER,null),this}clear(){var t,e,r;return null===(t=this.gl)||void 0===t||t.clear((null===(e=this.gl)||void 0===e?void 0:e.COLOR_BUFFER_BIT)|(null===(r=this.gl)||void 0===r?void 0:r.DEPTH_BUFFER_BIT)),this}getContext(){return this.gl}}},257:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=r(383);e.default=class{constructor(t,e=i.normalizeRGB({red:201,green:226,blue:255}),r=i.normalizeRGB({red:50,green:50,blue:50}),n=i.normalizeRGB({red:255,green:255,blue:255}),o=1,a=500){this.lightPosition=t,this.lightColor=e,this.ambientLightColor=r,this.specularColor=n,this.specularFactor=o,this.shininess=a}setUniforms(t,e){t.uniform3fv(e.lightPositionLoc,[this.lightPosition.x,this.lightPosition.y,this.lightPosition.z]),t.uniform4fv(e.lightColorLoc,this.lightColor),t.uniform4fv(e.ambientLightColorLoc,this.ambientLightColor),t.uniform4fv(e.specularColorLoc,this.specularColor),t.uniform1f(e.specularFactorLoc,this.specularFactor),t.uniform1f(e.shininessLoc,this.shininess)}}},594:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Matrix4=e.Vector3=void 0;class r{constructor(t,e,r){this.x=t||0,this.y=e||0,this.z=r||0}magnitude(t={x:0,y:0,z:0}){if(void 0===t)return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z);let e=t.x-this.x,r=t.y-this.y,i=t.y-this.z;return Math.sqrt(e*e+r*r+i*i)}normalize(){let t=this.magnitude();return this.x/=t,this.y/=t,this.z/=t,this}set(t,e,r){return this.x=t,this.y=e,this.z=r,this}multiScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}getArray(){return[this.x,this.y,this.z]}getFloatArray(){return new Float32Array([this.x,this.y,this.z])}clone(){return new r(this.x,this.y,this.z)}}e.Vector3=r;class i{constructor(){this.matrix=i.identity()}vtranslate(t){return i.translate(this.matrix,t.x,t.y,t.z),this}translate(t,e,r){return i.translate(this.matrix,t,e,r),this}rotateY(t){return i.rotateY(this.matrix,t),this}rotateX(t){return i.rotateX(this.matrix,t),this}rotateZ(t){return i.rotateZ(this.matrix,t),this}vscale(t){return i.scale(this.matrix,t.x,t.y,t.z),this}scale(t,e,r){return i.scale(this.matrix,t,e,r),this}invert(){return i.invert(this.matrix),this}resetRotation(){for(let t=0;t<this.matrix.length;t++)t>=12&&t<=14||(this.matrix[t]=t%5==0?1:0);return this}resetMat(){for(let t=0;t<this.matrix.length;t++)this.matrix[t]=t%5==0?1:0;return this}static identity(){let t=new Float32Array(16);return t[0]=t[5]=t[10]=t[15]=1,t}static perspective(t,e,r,i,n){let o=1/Math.tan(e/2),a=1/(i-n);t[0]=o/r,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(n+i)*a,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*n*i*a,t[15]=0}static ortho(t,e,r,i,n,o,a){let s=1/(e-r),l=1/(i-n),c=1/(o-a);t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*c,t[11]=0,t[12]=(e+r)*s,t[13]=(n+i)*l,t[14]=(a+o)*c,t[15]=1}static lookAt(t,e,r,n=null){n=n||new Float32Array(16);var o=i.normalize(i.subtractVectors(t,e)),a=i.normalize(i.cross(r,o)),s=i.normalize(i.cross(o,a));return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=0,n[4]=s[0],n[5]=s[1],n[6]=s[2],n[7]=0,n[8]=o[0],n[9]=o[1],n[10]=o[2],n[11]=0,n[12]=t[0],n[13]=t[1],n[14]=t[2],n[15]=1,n}static subtractVectors(t,e,r=null){return(r=r||new Float32Array(3))[0]=t[0]-e[0],r[1]=t[1]-e[1],r[2]=t[2]-e[2],r}static cross(t,e,r=null){return(r=r||new Float32Array(3))[0]=t[1]*e[2]-t[2]*e[1],r[1]=t[2]*e[0]-t[0]*e[2],r[2]=t[0]*e[1]-t[1]*e[0],r}static normalize(t,e=null){e=e||new Float32Array(3);var r=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return r>1e-5&&(e[0]=t[0]/r,e[1]=t[1]/r,e[2]=t[2]/r),e}static transpose(t,e){if(t===e){let r=e[1],i=e[2],n=e[3],o=e[6],a=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=r,t[6]=e[9],t[7]=e[13],t[8]=i,t[9]=o,t[11]=e[14],t[12]=n,t[13]=a,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}static normalMat3(t,e){let r=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],_=e[12],m=e[13],p=e[14],v=e[15],g=r*s-i*a,E=r*l-n*a,M=r*c-o*a,T=i*l-n*s,x=i*c-o*s,R=n*c-o*l,S=u*m-h*_,L=u*p-d*_,A=u*v-f*_,P=h*p-d*m,C=h*v-f*m,O=d*v-f*p,y=g*O-E*C+M*P+T*A-x*L+R*S;return y?(y=1/y,t[0]=(s*O-l*C+c*P)*y,t[1]=(l*A-a*O-c*L)*y,t[2]=(a*C-s*A+c*S)*y,t[3]=(n*C-i*O-o*P)*y,t[4]=(r*O-n*A+o*L)*y,t[5]=(i*A-r*C-o*S)*y,t[6]=(m*R-p*x+v*T)*y,t[7]=(p*M-_*R-v*E)*y,t[8]=(_*x-m*M+v*g)*y,t):null}static multiplyVector(t,e){let r=e[0],i=e[1],n=e[2],o=e[3],a=t[0],s=t[1],l=t[2],c=t[3],u=t[4],h=t[5],d=t[6],f=t[7],_=t[8],m=t[9],p=t[10],v=t[11];return[r*a+i*u+n*_+o*t[12],r*s+i*h+n*m+o*t[13],r*l+i*d+n*p+o*t[14],r*c+i*f+n*v+o*t[15]]}static transformVec4(t,e,r){return t[0]=r[0]*e[0]+r[4]*e[1]+r[8]*e[2]+r[12]*e[3],t[1]=r[1]*e[0]+r[5]*e[1]+r[9]*e[2]+r[13]*e[3],t[2]=r[2]*e[0]+r[6]*e[1]+r[10]*e[2]+r[14]*e[3],t[3]=r[3]*e[0]+r[7]*e[1]+r[11]*e[2]+r[15]*e[3],t}static mult(t,e,r){let i=e[0],n=e[1],o=e[2],a=e[3],s=e[4],l=e[5],c=e[6],u=e[7],h=e[8],d=e[9],f=e[10],_=e[11],m=e[12],p=e[13],v=e[14],g=e[15],E=r[0],M=r[1],T=r[2],x=r[3];return t[0]=E*i+M*s+T*h+x*m,t[1]=E*n+M*l+T*d+x*p,t[2]=E*o+M*c+T*f+x*v,t[3]=E*a+M*u+T*_+x*g,E=r[4],M=r[5],T=r[6],x=r[7],t[4]=E*i+M*s+T*h+x*m,t[5]=E*n+M*l+T*d+x*p,t[6]=E*o+M*c+T*f+x*v,t[7]=E*a+M*u+T*_+x*g,E=r[8],M=r[9],T=r[10],x=r[11],t[8]=E*i+M*s+T*h+x*m,t[9]=E*n+M*l+T*d+x*p,t[10]=E*o+M*c+T*f+x*v,t[11]=E*a+M*u+T*_+x*g,E=r[12],M=r[13],T=r[14],x=r[15],t[12]=E*i+M*s+T*h+x*m,t[13]=E*n+M*l+T*d+x*p,t[14]=E*o+M*c+T*f+x*v,t[15]=E*a+M*u+T*_+x*g,t}static scale(t,e,r,i){return t[0]*=e,t[1]*=e,t[2]*=e,t[3]*=e,t[4]*=r,t[5]*=r,t[6]*=r,t[7]*=r,t[8]*=i,t[9]*=i,t[10]*=i,t[11]*=i,t}static rotateY(t,e){let r=Math.sin(e),i=Math.cos(e),n=t[0],o=t[1],a=t[2],s=t[3],l=t[8],c=t[9],u=t[10],h=t[11];return t[0]=n*i-l*r,t[1]=o*i-c*r,t[2]=a*i-u*r,t[3]=s*i-h*r,t[8]=n*r+l*i,t[9]=o*r+c*i,t[10]=a*r+u*i,t[11]=s*r+h*i,t}static rotateX(t,e){let r=Math.sin(e),i=Math.cos(e),n=t[4],o=t[5],a=t[6],s=t[7],l=t[8],c=t[9],u=t[10],h=t[11];return t[4]=n*i+l*r,t[5]=o*i+c*r,t[6]=a*i+u*r,t[7]=s*i+h*r,t[8]=l*i-n*r,t[9]=c*i-o*r,t[10]=u*i-a*r,t[11]=h*i-s*r,t}static rotateZ(t,e){let r=Math.sin(e),i=Math.cos(e),n=t[0],o=t[1],a=t[2],s=t[3],l=t[4],c=t[5],u=t[6],h=t[7];return t[0]=n*i+l*r,t[1]=o*i+c*r,t[2]=a*i+u*r,t[3]=s*i+h*r,t[4]=l*i-n*r,t[5]=c*i-o*r,t[6]=u*i-a*r,t[7]=h*i-s*r,t}static rotate(t,e,r){let i,n,o,a,s,l,c,u,h,d,f,_,m,p,v,g,E,M,T,x,R,S,L,A,P=r[0],C=r[1],O=r[2],y=Math.sqrt(P*P+C*C+O*O);if(Math.abs(y)<1e-6)return null;y=1/y,P*=y,C*=y,O*=y,i=Math.sin(e),n=Math.cos(e),o=1-n,a=t[0],s=t[1],l=t[2],c=t[3],u=t[4],h=t[5],d=t[6],f=t[7],_=t[8],m=t[9],p=t[10],v=t[11],g=P*P*o+n,E=C*P*o+O*i,M=O*P*o-C*i,T=P*C*o-O*i,x=C*C*o+n,R=O*C*o+P*i,S=P*O*o+C*i,L=C*O*o-P*i,A=O*O*o+n,t[0]=a*g+u*E+_*M,t[1]=s*g+h*E+m*M,t[2]=l*g+d*E+p*M,t[3]=c*g+f*E+v*M,t[4]=a*T+u*x+_*R,t[5]=s*T+h*x+m*R,t[6]=l*T+d*x+p*R,t[7]=c*T+f*x+v*R,t[8]=a*S+u*L+_*A,t[9]=s*S+h*L+m*A,t[10]=l*S+d*L+p*A,t[11]=c*S+f*L+v*A}static invert(t,e){void 0===e&&(e=t);let r=e[0],i=e[1],n=e[2],o=e[3],a=e[4],s=e[5],l=e[6],c=e[7],u=e[8],h=e[9],d=e[10],f=e[11],_=e[12],m=e[13],p=e[14],v=e[15],g=r*s-i*a,E=r*l-n*a,M=r*c-o*a,T=i*l-n*s,x=i*c-o*s,R=n*c-o*l,S=u*m-h*_,L=u*p-d*_,A=u*v-f*_,P=h*p-d*m,C=h*v-f*m,O=d*v-f*p,y=g*O-E*C+M*P+T*A-x*L+R*S;return!!y&&(y=1/y,t[0]=(s*O-l*C+c*P)*y,t[1]=(n*C-i*O-o*P)*y,t[2]=(m*R-p*x+v*T)*y,t[3]=(d*x-h*R-f*T)*y,t[4]=(l*A-a*O-c*L)*y,t[5]=(r*O-n*A+o*L)*y,t[6]=(p*M-_*R-v*E)*y,t[7]=(u*R-d*M+f*E)*y,t[8]=(a*C-s*A+c*S)*y,t[9]=(i*A-r*C-o*S)*y,t[10]=(_*x-m*M+v*g)*y,t[11]=(h*M-u*x-f*g)*y,t[12]=(s*L-a*P-l*S)*y,t[13]=(r*P-i*L+n*S)*y,t[14]=(m*E-_*T-p*g)*y,t[15]=(u*T-h*E+d*g)*y,!0)}static translate(t,e,r,i){t[12]=t[0]*e+t[4]*r+t[8]*i+t[12],t[13]=t[1]*e+t[5]*r+t[9]*i+t[13],t[14]=t[2]*e+t[6]*r+t[10]*i+t[14],t[15]=t[3]*e+t[7]*r+t[11]*i+t[15]}}e.Matrix4=i},154:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.Model=e.ModelShader=void 0;const n=i(r(291)),o=i(r(578)),a=i(r(165)),s=r(383),l=r(594);e.ModelShader=class{constructor(t,e){const r=new a.default(t,"#version 300 es\n\t\t\tin vec3 a_position;\n\t\t\tin vec3 a_norm;\n\t\t\tin vec2 a_texCoord;\n\n\t\t\tuniform vec3 u_lightPosition;\n\t\t\tuniform vec3 u_cameraPosition;\n\n\t\t\tuniform mat4 u_modelMatrix;\n\t\t\tuniform mat4 u_cameraViewMatrix;\n\t\t\tuniform mat4 u_projectionMatrix;\n\n\t\t\tout vec3 v_normal;\n\t\t\tout vec3 v_surfaceToLight;\n\t\t\tout vec3 v_surfaceToCamera;\n\n\t\t\tout vec2 v_texCoord;\n\n\t\t\tvoid main(void){\n\n\t\t\t\tgl_Position = u_projectionMatrix * u_cameraViewMatrix * u_modelMatrix * vec4(a_position, 1.0);\n\t\t\t\tv_normal = (u_cameraViewMatrix * vec4(a_norm, 0.0)).xyz;\n\n\t\t\t\tvec3 v_surfaceWorldPosition = (u_modelMatrix * vec4(a_position, 1.0)).xyz;\n\t\t\t\tv_surfaceToLight = u_lightPosition - v_surfaceWorldPosition;\n\t\t\t\tv_surfaceToCamera = u_cameraPosition - v_surfaceWorldPosition;\n\n\t\t\t\tv_texCoord = a_texCoord;\n\n\t\t\t}","#version 300 es\n\t\t\tprecision highp float;\n\n\t\t\tin vec2 v_texCoord;\n\t\t\tin vec3 v_normal;\n\t\t\tin vec3 v_surfaceToLight;\n\t\t\tin vec3 v_surfaceToCamera;\n\n\t\t\tuniform sampler2D u_smapler_0;\n\t\t\tuniform sampler2D u_smapler_1;\n\t\t\tuniform sampler2D u_smapler_2;\n\t\t\tuniform sampler2D u_smapler_3;\n\t\t\tuniform vec4 u_lightColor;\n\t\t\tuniform vec4 u_ambientLightColor;\n\t\t\tuniform vec4 u_specularColor;\n\t\t\tuniform float u_shininess;\n\t\t\tuniform float u_specularFactor;\n\n\t\t\tout vec4 finalColor;\n\n\t\t\tvoid main(void) {\n\n\t\t\t\tvec4 texel0 = texture(u_smapler_0, v_texCoord);\n\t\t\t\tvec4 texel1 = texture(u_smapler_1, v_texCoord);\n\t\t\t\tvec4 texel2 = texture(u_smapler_2, v_texCoord);\n\t\t\t\tvec4 texel3 = texture(u_smapler_3, v_texCoord);\n\t\t\t\tvec4 c_texel =  (texel0 + texel1) * texel2 * texel3;\n\t\t\t\tvec3 normal = normalize(v_normal);\n\n\t\t\t\tvec3 surfaceToLightDirection = normalize(v_surfaceToLight);\n\t\t\t\tvec3 surfaceToCameraDirection = normalize(v_surfaceToCamera);\n\t\t\t\tvec3 halfVector = normalize(surfaceToLightDirection + surfaceToCameraDirection);\n\n\t\t\t\tfloat lightIntensity = dot(normal, surfaceToLightDirection);\n\t\t\t\tfloat specular = 0.0;\n\t\t\t\tif (lightIntensity > 0.0) {\n\t\t\t\t  specular = pow(dot(normal, halfVector), u_shininess);\n\t\t\t\t}\n\n\t\t\t\tvec4 diffuse = (u_ambientLightColor + u_lightColor) * lightIntensity;\n\t\t\t\tvec4 outColor = vec4(c_texel.rgb * diffuse.xyz, c_texel.a);\n\t\t\t\toutColor.rgb += specular;\n\n\t\t\t\tfinalColor = outColor;\n\t\t\t}");r.activateShader(),this.positionLoc=t.getAttribLocation(r.program,s.GLSetttings.ATTR_POSITION_NAME),this.texCoordLoc=t.getAttribLocation(r.program,s.GLSetttings.ATTR_UV_NAME),this.normalLoc=t.getAttribLocation(r.program,s.GLSetttings.ATTR_NORMAL_NAME),this.modelMatrixLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_MODEL_MAT),this.perspectiveMatrixLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_PROJECTION_MAT),this.cameraViewMatrixLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_CAMERA_VIEW_MAT),this.projectedTextureLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_PROJECTED_TEXTURE),this.textureMatrixLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_TEXTURE_MAT),this.ambientLightColorLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_LIGHT_AMBIENT),this.lightPositionLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_LIGHT_POSITION),this.cameraPositionLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_CAMERA_POSITION),this.shininessLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_CAMERA_SHININESS),this.lightColorLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_LIGHT_COLOR),this.specularColorLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_SPECULAR_COLOR),this.specularFactorLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_SPECULAR_FACTOR),this.sampler0Loc=t.getUniformLocation(r.program,s.GLSetttings.UNI_SAMPLER_0),this.sampler1Loc=t.getUniformLocation(r.program,s.GLSetttings.UNI_SAMPLER_1),this.sampler2Loc=t.getUniformLocation(r.program,s.GLSetttings.UNI_SAMPLER_2),this.sampler3Loc=t.getUniformLocation(r.program,s.GLSetttings.UNI_SAMPLER_3),r.deactivateShader(),this.perspectiveProjectionMatrix=e.perspectiveProjection,this.orthoProjectionMatrix=e.orthoProjection,this.viewMatrix=e.viewMatrix,this.sceneViewCamera=e,this.shaderProgram=r}setUniforms(t,e){return this.shaderProgram.activateShader(),t.uniformMatrix4fv(this.perspectiveMatrixLoc,!1,this.perspectiveProjectionMatrix),t.uniformMatrix4fv(this.cameraViewMatrixLoc,!1,this.viewMatrix),t.uniformMatrix4fv(this.modelMatrixLoc,!1,e.transform.getModelMatrix()),t.uniform3fv(this.cameraPositionLoc,this.sceneViewCamera.transform.position.getFloatArray()),this}getLightWorldMatrix(t,e){return l.Matrix4.lookAt([t.transform.position.x,t.transform.position.y,t.transform.position.z],[e.transform.position.x,e.transform.position.y,e.transform.position.z],[0,1,0])}getTextureMatrix(t){let e=l.Matrix4.identity();l.Matrix4.translate(e,.5,.5,.5),l.Matrix4.scale(e,.5,.5,.5),l.Matrix4.mult(e,e,this.orthoProjectionMatrix);let r=[];return l.Matrix4.invert(r,t),l.Matrix4.mult(e,e,r),e}};class c{constructor(){}static createGeometry(t,e,r){return new n.default(c.createMesh(t,e,r))}static createMesh(t,e,r){var i,n,a;const l=r.vertexCount(),c={positions:new o.default(t,r.positions(),l,s.GLSetttings.BUFFER_TYPE_ARRAY),normals:new o.default(t,r.normals(),l,s.GLSetttings.BUFFER_TYPE_ARRAY),uvs:new o.default(t,r.uvs(),l,s.GLSetttings.BUFFER_TYPE_ARRAY),drawMode:t.TRIANGLES,vertexCount:l};return null===(i=c.positions)||void 0===i||i.bindToAttribute(e.positionLoc,s.GLSetttings.DEFAULT_STRIDE,s.GLSetttings.DEFAULT_OFFSET),null===(n=c.normals)||void 0===n||n.bindToAttribute(e.normalLoc,s.GLSetttings.DEFAULT_STRIDE,s.GLSetttings.DEFAULT_OFFSET),null===(a=c.uvs)||void 0===a||a.bindToAttribute(e.texCoordLoc,s.GLSetttings.DEFAULT_STRIDE,s.GLSetttings.DEFAULT_OFFSET),c}}e.Model=c},738:function(t,e,r){var i=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))((function(n,o){function a(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0});const n=r(383);class o{constructor(t){this.surfaces=[],this.surfaces=t}static parseOBJ(t){const e=n.ObjTypes.V,r=n.ObjTypes.VN,i=n.ObjTypes.VT,a=n.ObjTypes.F,s=t.split(n.NEW_LINE),l=[],c=[],u=[],h=[];for(let t of s){const o=t.trim().split(n.SPACE),s=o[0];if(e===s)l.push(n.Vec3Struct(parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3])));else if(r===s)u.push(n.Vec3Struct(parseFloat(o[1]),parseFloat(o[2]),parseFloat(o[3])));else if(i===s)c.push(n.Vec2Struct(parseFloat(o[1]),1-parseFloat(o[2])));else if(a===s){let t=!1,e=!1,r=4;const i=[];for(let a=1;a<r;a++){if(o.length>r&&!e)r+=1;else if(4!==a||t){if(5===a&&t)a=1,t=!1,e=!0;else if(2===a&&e)break}else a=3,r+=1,t=!0;const s=o[a].split(n.BACKSLASH),h=l[parseInt(s[0])-1],d=c[parseInt(s[1])-1],f=u[parseInt(s[2])-1];i.push(n.VertexStruct(h,f,d))}if(i.length>3){const t=i.slice(0,3),e=i.slice(3);h.push(n.SurfaceStruct(t)),h.push(n.SurfaceStruct(e))}else h.push(n.SurfaceStruct(i))}}return new o(h)}static loadOBJ(t){return i(this,void 0,void 0,(function*(){const e=yield fetch(t),r=yield e.text();return o.parseOBJ(r)}))}vertexCount(){return 3*this.surfaces.length}positions(){const t=[];return this.surfaces.forEach((function(e){e.vertices.forEach((function(e){const r=e.position;t.push(r.x,r.y,r.z)}))})),t}normals(){const t=[];return this.surfaces.forEach((function(e){e.vertices.forEach((function(e){const r=e.normal;t.push(r.x,r.y,r.z)}))})),t}uvs(){const t=[];return this.surfaces.forEach((function(e){e.vertices.forEach((function(e){const r=e.uv;t.push(r.x,r.y)}))})),t}}e.default=o},184:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),e.InfiniteGrid=e.InfiniteGridShader=void 0;const n=i(r(291)),o=i(r(578)),a=i(r(165)),s=r(383);e.InfiniteGridShader=class{constructor(t,e){const r=new a.default(t,"#version 300 es\n            layout(location=5) in vec3 a_position;\n\n\t\t\tuniform mat4 u_cameraViewMatrix;\n\t\t\tuniform mat4 u_projectionMatrix;\n\n\t\t\tvec3 unprojectPoint(float x, float y, float z, mat4 view, mat4 projection) {\n                mat4 viewInv = inverse(view);\n                mat4 projInv = inverse(projection);\n                vec4 unprojectedPoint =  viewInv * projInv * vec4(x, y, z, 1.0);\n                return unprojectedPoint.xyz / unprojectedPoint.w;\n            }\n\n\t\t\tout vec3 nearPoint;\n\t\t\tout vec3 farPoint;\n\t\t\tout mat4 fragView;\n            out mat4 fragProj;\n\n\t\t\tout vec3 vertexPosition;\n\n\t\t\tvoid main(void){\n\t\t\t\tvec3 p = a_position;\n\n\t\t\t\tfragView = u_cameraViewMatrix;\n                fragProj = u_projectionMatrix;\n\t\t\t\tnearPoint = unprojectPoint(p.x, p.y, 0.0, u_cameraViewMatrix, u_projectionMatrix).xyz;\n\t\t\t\tfarPoint = unprojectPoint(p.x, p.y, 1.0, u_cameraViewMatrix, u_projectionMatrix).xyz;\n\n\t\t\t\tvertexPosition = p.xyz;\n\t\t\t\tgl_Position = vec4(p, 1.0);\n\n\t\t\t}","#version 300 es\n\t\t\tprecision highp float;\n\n\t\t\tin vec3 vertexPosition;\n\t\t\tin vec3 nearPoint;\n            in vec3 farPoint;\n            in mat4 fragView;\n            in mat4 fragProj;\n\n\t\t\t// computes Z-buffer depth value, and converts the range.\n\t\t\tfloat computeDepth(vec3 pos) {\n\t\t\t\t// get the clip-space coordinates\n\t\t\t\tvec4 clip_space_pos = fragProj * fragView * vec4(pos.xyz, 1.0);\n\n\t\t\t\t// get the depth value in normalized device coordinates\n\t\t\t\tfloat clip_space_depth = clip_space_pos.z / clip_space_pos.w;\n\n\t\t\t\t// and compute the range based on gl_DepthRange settings (not necessary with default settings, but left for completeness)\n\t\t\t\tfloat far = gl_DepthRange.far;\n\t\t\t\tfloat near = gl_DepthRange.near;\n\n\t\t\t\tfloat depth = (((far-near) * clip_space_depth) + near + far) / 2.0;\n\n\t\t\t\t// and return the result\n\t\t\t\treturn depth;\n\t\t\t}\n\n\t\t\t\n\t\t\tvec4 grid(vec3 fragPos3D, float scale) {\n                vec2 coord = fragPos3D.xz * scale;\n                vec2 derivative = fwidth(coord);\n                vec2 grid = abs(fract(coord - 0.5) - 0.5) / derivative;\n                float line = min(grid.x, grid.y);\n                float minimumz = min(derivative.y, 1.0);\n                float minimumx = min(derivative.x, 1.0);\n\t\t\t\tvec3 gridColor = vec3(1.0 - min(line, 1.0));\n                vec4 color = vec4(gridColor, 1.0);\n                return color;\n            }\n\n            out vec4 finalColor;\n\n\t\t\tvoid main(void){\n\n                float t = -nearPoint.y / (farPoint.y - nearPoint.y);\n                vec3 fragPos3D = nearPoint + t * (farPoint - nearPoint);\n\t\n\t\t\t\tfloat isIntersect = (t > 0.0) ? 1.0 : 0.0;\n\t\t\t\tfloat linearFieldSection = 0.09 * length(fragPos3D.xz);\n\t\t\t\tfloat fading = min(1.0, 1.5 - linearFieldSection);\n\n\t\t\t\tvec4 gridPattern = grid(fragPos3D, 0.5);\n\t\t\t\t\n\t\t\t\tvec4 outColor = gridPattern;\n\n\t\t\t\tfinalColor = outColor * isIntersect;\n\t\t\t\tfinalColor *= fading;\n\n\t\t\t\tgl_FragDepth = computeDepth(fragPos3D);\n            }");r.activateShader(),this.positionLoc=t.getAttribLocation(r.program,s.GLSetttings.ATTR_POSITION_NAME),this.perspectiveMatrixLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_PROJECTION_MAT),this.cameraViewMatrixLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_CAMERA_VIEW_MAT),this.uColorLoc=t.getUniformLocation(r.program,s.GLSetttings.UNI_COLOR),r.deactivateShader(),this.perspectiveProjectionMatrix=e.perspectiveProjection,this.viewModelMatrix=e.viewMatrix,this.shaderProgram=r}setUniforms(t){return this.shaderProgram.activateShader(),t.uniformMatrix4fv(this.perspectiveMatrixLoc,!1,this.perspectiveProjectionMatrix),t.uniformMatrix4fv(this.cameraViewMatrixLoc,!1,this.viewModelMatrix),this}};class l{constructor(){}static createGeometry(t,e){return new n.default(l.createMesh(t,e))}static createMesh(t,e){var r;const i=[1,-1,0,1,1,0,-1,-1,0,-1,1,0,-1,-1,0,1,1,0],n=i.length/3,a=3*Float32Array.BYTES_PER_ELEMENT,l={positions:new o.default(t,i,n,s.GLSetttings.BUFFER_TYPE_ARRAY),drawMode:t.TRIANGLES,vertexCount:n};return null===(r=l.positions)||void 0===r||r.bindToAttribute(e.positionLoc,a,s.GLSetttings.DEFAULT_OFFSET,s.GLSetttings.GRID_VECTOR_SIZE),l}}e.InfiniteGrid=l},182:function(t,e,r){var i=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))((function(n,o){function a(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))},n=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0});const o=n(r(486)),a=r(383),s=r(198),l=r(193),c=n(r(705)),u=n(r(257)),h=r(594),d=r(154),f=n(r(738)),_=r(184),m=n(r(21));e.default=class{constructor(){(()=>{i(this,void 0,void 0,(function*(){const t=new o.default,e=new c.default(a.ProgramEntrySettings.WEBGL_CANVAS_ID),[r,i]=[.95,.9];e.fitScreen(r,i).setClearColor(13,17,23,1).clear();const n=e.getContext(),p=new h.Vector3(0,2.5,3),v=new u.default(p),g=yield f.default.loadOBJ(null===s.config||void 0===s.config?void 0:s.config.MODELS.FORMULA_1.MODEL),E=[];for(const t of null===s.config||void 0===s.config?void 0:s.config.MODELS.FORMULA_1.TEXTURES)E.push(yield m.default.loadTexture(n,t));const M=new l.Camera(n);M.transform.position.set(0,.5,1.5),new l.CameraController(n,M);const T=new _.InfiniteGridShader(n,M),x=_.InfiniteGrid.createGeometry(n,T),R=new d.ModelShader(n,M),S=d.Model.createGeometry(n,R,g);S.setScale(.0035,.0035,.0035).setRotation(0,30,0),t.disable();const L=()=>{M.updateViewMatrix(),T.setUniforms(n).shaderProgram.renderModel(x.preRender()),R.setUniforms(n,S.preRender()).shaderProgram.renderModel(S.preRender());for(const t in E){const e=Number(t);E[t].setUniform(R,e).activate(e)}v.setUniforms(n,R),requestAnimationFrame(L)};L()}))})()}}},165:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.default=class{constructor(t,e,r){this.gl=null,this.vertexShader=null,this.fragmentShader=null;const i=this.createShader(t,t.VERTEX_SHADER,e),n=this.createShader(t,t.FRAGMENT_SHADER,r),o=this.createShaderProgram(t,n,i);this.program=o,this.gl=t}createShader(t,e,r){const i=t.createShader(e);return t.shaderSource(i,r),t.compileShader(i),t.getShaderParameter(i,t.COMPILE_STATUS)?i:(console.error("An error occurred compiling the shaders: "+t.getShaderInfoLog(i)),t.deleteShader(i),null)}createShaderProgram(t,e,r){const i=t.createProgram();if(t.attachShader(i,e),t.attachShader(i,r),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS))throw console.error("Error creating shader program.",t.getProgramInfoLog(i)),t.deleteProgram(i),new Error("Failed to link shaderProgram");return this.vertexShader=e,this.fragmentShader=r,t.detachShader(i,e),t.detachShader(i,r),t.deleteShader(r),t.deleteShader(e),i}activateShader(){return this.gl.useProgram(this.program),this}deactivateShader(){return this.gl.useProgram(null),this}dispose(){this.gl.getParameter(this.gl.CURRENT_PROGRAM)===this.program&&this.deactivateShader(),this.gl.deleteProgram(this.program)}renderModel(t){const e=this.gl;return t.mesh.noCulling&&e.disable(e.CULL_FACE),t.mesh.doBlending&&e.enable(e.BLEND),e.drawArrays(t.mesh.drawMode,0,t.mesh.vertexCount),t.mesh.noCulling&&e.enable(e.CULL_FACE),t.mesh.doBlending&&e.disable(e.BLEND),this}}},179:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=r(594),n=r(383);e.default=class{constructor(){this.position=new i.Vector3(0,0,0),this.scale=new i.Vector3(1,1,1),this.rotation=new i.Vector3(0,0,0),this.modelMatrix=new i.Matrix4,this.normalMatrix=new Float32Array(9),this.forward=new Float32Array(4),this.up=new Float32Array(4),this.right=new Float32Array(4)}updateMatrix(){return this.modelMatrix.resetMat().vtranslate(this.position).rotateX(n.degToRad(this.rotation.x)).rotateY(n.degToRad(this.rotation.y)).rotateZ(n.degToRad(this.rotation.z)).vscale(this.scale),i.Matrix4.normalMat3(this.normalMatrix,this.modelMatrix.matrix),i.Matrix4.transformVec4(this.forward,[0,0,1,0],this.modelMatrix.matrix),i.Matrix4.transformVec4(this.up,[0,1,0,0],this.modelMatrix.matrix),i.Matrix4.transformVec4(this.right,[1,0,0,0],this.modelMatrix.matrix),this.modelMatrix.matrix}updateDirection(){return i.Matrix4.transformVec4(this.forward,[0,0,1,0],this.modelMatrix.matrix),i.Matrix4.transformVec4(this.up,[0,1,0,0],this.modelMatrix.matrix),i.Matrix4.transformVec4(this.right,[1,0,0,0],this.modelMatrix.matrix),this}getModelMatrix(){return this.modelMatrix.matrix}getNormalMatrix(){return this.normalMatrix}reset(){this.position.set(0,0,0),this.scale.set(1,1,1),this.rotation.set(0,0,0)}}},578:(t,e,r)=>{Object.defineProperty(e,"__esModule",{value:!0});const i=r(383);e.default=class{constructor(t,e,r,n){switch(this.buffer=t.createBuffer(),n){case i.GLSetttings.BUFFER_TYPE_ARRAY:t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW);break;case i.GLSetttings.BUFFER_TYPE_ELEMENT_ARRAY:t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.buffer),t.bufferData(t.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),t.STATIC_DRAW);break;default:t.bindBuffer(t.ARRAY_BUFFER,this.buffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW)}this.gl=t,this.size=e.length/r}destroy(){this.gl.deleteBuffer(this.buffer)}bindToAttribute(t,e,r,n=this.size,o=i.GLSetttings.BUFFER_TYPE_VERTICES){const a=this.gl;switch(o){case i.GLSetttings.BUFFER_TYPE_ARRAY:a.enableVertexAttribArray(t),a.bindBuffer(a.ARRAY_BUFFER,this.buffer),a.vertexAttribPointer(t,n,a.FLOAT,!1,e,r),a.bindBuffer(a.ARRAY_BUFFER,null);break;case i.GLSetttings.BUFFER_TYPE_ELEMENT_ARRAY:a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,this.buffer),a.bufferData(a.ELEMENT_ARRAY_BUFFER,new Uint16Array(t),a.STATIC_DRAW),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,null);break;default:a.enableVertexAttribArray(t),a.bindBuffer(a.ARRAY_BUFFER,this.buffer),a.vertexAttribPointer(t,n,a.FLOAT,!1,e,r),a.bindBuffer(a.ARRAY_BUFFER,null)}}}},24:function(t,e,r){var i=this&&this.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(e,"__esModule",{value:!0}),new(i(r(259)).default)},898:(t,e)=>{var r,i,n,o,a;Object.defineProperty(e,"__esModule",{value:!0}),e.ObjTypes=e.GLSetttings=e.CameraControlsSettings=e.CameraSettings=e.ProgramEntrySettings=e.SPACE=e.BACKSLASH=e.NEW_LINE=e.TEXTURE=void 0,e.TEXTURE="TEXTURE",e.NEW_LINE="\n",e.BACKSLASH="/",e.SPACE=/\s+/,(a=e.ProgramEntrySettings||(e.ProgramEntrySettings={})).WEBGL_CANVAS_ID="qrius-glCanvas",a.WEBGL_CONTEXT="webgl2",a.WEBGL_CONTEXT_EXPERIMENTAL="experimental-webgl",a.WEBGL_CONTEXT_WEBKIT="webkit-3d",a.WEBGL_CONTEXT_MOZ="moz-webgl",a.WEBGL_DEPTH_TEXTURE="WEBGL_depth_texture",a.WEBGL_CONTEXT_ERROR_MESSAGE="Could not initialise WebGL",a.WEBGL_DEPTH_TEXTUR_ERROR_MESSAGE="need WEBGL_depth_texture",a.PATH_ASSETS_OBJ="/webgl-3d-renderer/assets/resources/formula_1/source/formula_1.obj",a.PATH_ASSETS_TEXTURE="/webgl-3d-renderer/assets/resources/formula_1/textures/formula_1.png",a[a.DEPTH_TEXTURE_SIZE=512]="DEPTH_TEXTURE_SIZE",(o=e.CameraSettings||(e.CameraSettings={}))[o.NEAR_PLANE=.1]="NEAR_PLANE",o[o.FAR_PLANE=100]="FAR_PLANE",o[o.FIELD_OF_VIEW=45]="FIELD_OF_VIEW",o[o.MODE_FREE=0]="MODE_FREE",o[o.MODE_ORBIT=1]="MODE_ORBIT",(n=e.CameraControlsSettings||(e.CameraControlsSettings={})).KEY_DOWN_EVENT="keydown",n.KEY_UP_EVENT="keyup",n[n.KEY_DOWN=40]="KEY_DOWN",n[n.KEY_UP=38]="KEY_UP",n[n.KEY_LEFT=37]="KEY_LEFT",n[n.KEY_RIGHT=39]="KEY_RIGHT",n.MOUSE_UP="mouseup",n.MOUSE_DOWN="mousedown",n.MOUSE_WHEEL="mousewheel",n.MOUSE_MOVE="mousemove",n[n.ROTATION_RATE=-300]="ROTATION_RATE",n[n.PAN_RATE=5]="PAN_RATE",n[n.ZOOM_RATE=200]="ZOOM_RATE",n.TOUCH_START="touchstart",n.TOUCH_MOVE="touchmove",n.TOUCH_CANCEL="touchcancel",n.TOUCH_END="touchend",(i=e.GLSetttings||(e.GLSetttings={}))[i.DEFAULT_OFFSET=0]="DEFAULT_OFFSET",i[i.DEFAULT_STRIDE=0]="DEFAULT_STRIDE",i[i.GRID_VECTOR_SIZE=3]="GRID_VECTOR_SIZE",i[i.GRID_VERTEX_LEN=4]="GRID_VERTEX_LEN",i.ATTR_POSITION_NAME="a_position",i.ATTR_NORMAL_NAME="a_norm",i.ATTR_UV_NAME="a_texCoord",i.UNI_COLOR="u_color",i.UNI_MODEL_MAT="u_modelMatrix",i.UNI_PROJECTION_MAT="u_projectionMatrix",i.UNI_CAMERA_VIEW_MAT="u_cameraViewMatrix",i.UNI_LIGHT_VIEW_CAMERA_MAT="u_lightViewCameraMatrix",i.UNI_REVERSE_LIGHT_DIRECTION_MAT="u_reverseLightDirection",i.UNI_TEXTURE_MAT="u_textureMatrix",i.UNI_PROJECTED_TEXTURE="u_projectedTexture",i.UNI_LIGHT_AMBIENT="u_ambientLightColor",i.UNI_LIGHT_DIRECTION="u_lightDirection",i.UNI_LIGHT_POSITION="u_lightPosition",i.UNI_CAMERA_POSITION="u_cameraPosition",i.UNI_CAMERA_SHININESS="u_shininess",i.UNI_LIGHT_COLOR="u_lightColor",i.UNI_SPECULAR_COLOR="u_specularColor",i.UNI_SPECULAR_FACTOR="u_specularFactor",i.UNI_SAMPLER_0="u_smapler_0",i.UNI_SAMPLER_1="u_smapler_1",i.UNI_SAMPLER_2="u_smapler_2",i.UNI_SAMPLER_3="u_smapler_3",i.UNI_SAMPLER_4="u_smapler_4",i.BUFFER_TYPE_ELEMENT_ARRAY="array_elements",i.BUFFER_TYPE_ARRAY="arrays",(r=e.ObjTypes||(e.ObjTypes={})).V="v",r.VN="vn",r.VT="vt",r.F="f"},383:function(t,e,r){var i=this&&this.__createBinding||(Object.create?function(t,e,r,i){void 0===i&&(i=r),Object.defineProperty(t,i,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,i){void 0===i&&(i=r),t[i]=e[r]}),n=this&&this.__exportStar||function(t,e){for(var r in t)"default"===r||Object.prototype.hasOwnProperty.call(e,r)||i(e,t,r)};Object.defineProperty(e,"__esModule",{value:!0}),n(r(898),e),n(r(282),e),n(r(796),e)},796:function(t,e){var r=this&&this.__awaiter||function(t,e,r,i){return new(r||(r=Promise))((function(n,o){function a(t){try{l(i.next(t))}catch(t){o(t)}}function s(t){try{l(i.throw(t))}catch(t){o(t)}}function l(t){var e;t.done?n(t.value):(e=t.value,e instanceof r?e:new r((function(t){t(e)}))).then(a,s)}l((i=i.apply(t,e||[])).next())}))};Object.defineProperty(e,"__esModule",{value:!0}),e.loadShaders=void 0,e.loadShaders=(t,e)=>r(void 0,void 0,void 0,(function*(){const i=t=>r(void 0,void 0,void 0,(function*(){const e=yield fetch(t);return yield e.text()})),[n,o]=yield Promise.all([i(t),i(e)]);return{vertexShaderFile:n,fragmentShaderFile:o}}))},282:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getRandomNumberBetween=e.mapValues=e.normalizeRGB=e.lerp=e.normalize=e.degToRad=e.radToDeg=e.Vec2Struct=e.Vec3Struct=e.VertexStruct=e.SurfaceStruct=void 0,e.SurfaceStruct=t=>({vertices:t}),e.VertexStruct=(t,e,r)=>({position:t,normal:e,uv:r}),e.Vec3Struct=(t,e,r)=>({x:t,y:e,z:r}),e.Vec2Struct=(t,e)=>({x:t,y:e}),e.radToDeg=t=>180*t/Math.PI,e.degToRad=t=>t*Math.PI/180,e.normalize=(t,e,r)=>(t-r)/(e-r),e.lerp=(t,e,r)=>t*(r-e)+e,e.normalizeRGB=({red:t,green:r,blue:i})=>{const n=255,o="band out of range each value must be from 1 - 255";if(t<=0||t>n)throw new Error(`value ${t} for red ${o}`);if(r<=0||r>n)throw new Error(`value ${r} for green ${o}`);if(i<=0||i>n)throw new Error(`value ${i} for blue ${o}`);const a=[e.normalize(t,n,0),e.normalize(i,n,0),e.normalize(r,n,0),1];return new Float32Array(a)},e.mapValues=(t,e,r,i,n)=>(t-e)/(r-e)*(n-i+i),e.getRandomNumberBetween=(t,e)=>Math.random()*(e-t)+t}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var o=e[i]={exports:{}};return t[i].call(o.exports,o,o.exports,r),o.exports}r.d=(t,e)=>{for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),r.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{var t;r.g.importScripts&&(t=r.g.location+"");var e=r.g.document;if(!t&&e&&(e.currentScript&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");i.length&&(t=i[i.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),r.p=t})(),r(24)})();
//# sourceMappingURL=bundle.js.map